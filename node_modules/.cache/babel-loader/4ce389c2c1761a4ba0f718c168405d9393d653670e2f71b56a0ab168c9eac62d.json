{"ast":null,"code":"import _toConsumableArray from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useContext}from'react';import axios from\"axios\";import Produit from\"./Produit\";import\"bootstrap/dist/css/bootstrap.min.css\";import{CategoryContext}from\"./CategoryContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Data(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchQuery=_useState4[0],setSearchQuery=_useState4[1];//pagination\nvar _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),currentPage=_useState6[0],setCurrentPage=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),totalPages=_useState8[0],setTotalPages=_useState8[1];var _useState9=useState(15),_useState10=_slicedToArray(_useState9,1),pageSize=_useState10[0];var _useContext=useContext(CategoryContext),selectedCategory=_useContext.selectedCategory;useEffect(function(){var fetchdata=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios('/.netlify/functions/produits');case 2:result=_context.sent;setData(result.data);setTotalPages(Math.ceil(result.data.length/pageSize));case 5:case\"end\":return _context.stop();}},_callee);}));return function fetchdata(){return _ref.apply(this,arguments);};}();fetchdata();},[pageSize]);var handlePageChange=function handlePageChange(pageNumber){setCurrentPage(pageNumber);};var filteredData=data.filter(function(item){return!selectedCategory||item.categorie.id===selectedCategory.id;}).filter(function(item){return item.name.toLowerCase().includes(searchQuery.toLowerCase());});var startIndex=(currentPage-1)*pageSize;var endIndex=startIndex+pageSize;var currentData=filteredData.slice(startIndex,endIndex);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row gy-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 d-flex  pb-2 justify-content-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",value:searchQuery,onChange:function onChange(e){return setSearchQuery(e.target.value);},className:\"form-control d-md-none rounded-pill px-3\",style:{width:'90%',height:'30px'},placeholder:\"Rechercher ...\"}),/*#__PURE__*/_jsx(\"input\",{type:\"search\",value:searchQuery,onChange:function onChange(e){return setSearchQuery(e.target.value);},className:\"form-control d-none d-md-block rounded-pill px-3 mb-3\",style:{width:'50%',height:'50px'},placeholder:\"Rechercher ...\"})]}),currentData.map(function(item){return/*#__PURE__*/_jsx(Produit,_objectSpread(_objectSpread({},item),{},{item:item}),item.id);})]}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center pt-3\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"pagination\",children:_toConsumableArray(Array(totalPages)).map(function(_,index){var pageNumber=index+1;return/*#__PURE__*/_jsx(\"li\",{className:\"page-item \".concat(currentPage===pageNumber?'active':''),children:/*#__PURE__*/_jsx(\"button\",{className:\"page-link\",onClick:function onClick(){return handlePageChange(pageNumber);},children:pageNumber})},pageNumber);})})})]})});}","map":{"version":3,"names":["useState","useEffect","useContext","axios","Produit","CategoryContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Data","_useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","searchQuery","setSearchQuery","_useState5","_useState6","currentPage","setCurrentPage","_useState7","_useState8","totalPages","setTotalPages","_useState9","_useState10","pageSize","_useContext","selectedCategory","fetchdata","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","result","wrap","_callee$","_context","prev","next","sent","Math","ceil","length","stop","apply","arguments","handlePageChange","pageNumber","filteredData","filter","item","categorie","id","name","toLowerCase","includes","startIndex","endIndex","currentData","slice","children","className","type","value","onChange","e","target","style","width","height","placeholder","map","_objectSpread","_toConsumableArray","Array","_","index","concat","onClick"],"sources":["/data/data/com.termux/files/home/deploy/exo_com/front/src/composant/Data.js"],"sourcesContent":["import {useState, useEffect, useContext} from 'react'\nimport axios from \"axios\"\nimport Produit from \"./Produit\"\nimport \"bootstrap/dist/css/bootstrap.min.css\"\n\nimport {CategoryContext} from \"./CategoryContext\"\n\n\nexport default function Data(){\n    \n    const [data, setData] = useState([])\n    \n    const [searchQuery, setSearchQuery] = useState(\"\");\n    \n    //pagination\n    \n    const [currentPage, setCurrentPage] = useState(1);\n    const [totalPages, setTotalPages] = useState(1);\n    const [pageSize] = useState(15);\n    \n    \n    const { selectedCategory } = useContext(CategoryContext);\n    \n\n    useEffect(()=>{\n        const fetchdata = async()=>{\n            const result = await axios('/.netlify/functions/produits')\n            setData(result.data)\n            setTotalPages(Math.ceil(result.data.length / pageSize));\n            \n        }\n        \n        fetchdata()\n    }, [pageSize])\n    \n    const handlePageChange = (pageNumber) => {\n      setCurrentPage(pageNumber);\n    };\n    \n    const filteredData = data\n    .filter((item) => !selectedCategory || item.categorie.id === selectedCategory.id)\n    .filter((item) => item.name.toLowerCase().includes(searchQuery.toLowerCase()));\n\n  const startIndex = (currentPage - 1) * pageSize;\n  const endIndex = startIndex + pageSize;\n  const currentData = filteredData.slice(startIndex, endIndex);\n    \n    return(\n        <>\n          \n          <div className=\"container-fluid\">\n            <div className=\"row gy-3\">\n              <div className=\"px-3 d-flex  pb-2 justify-content-center\">\n                <input\n                  type=\"search\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"form-control d-md-none rounded-pill px-3\"\n                  style={{ width: '90%', height: '30px' }}\n                  placeholder=\"Rechercher ...\"\n                />\n                              <input\n                  type=\"search\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"form-control d-none d-md-block rounded-pill px-3 mb-3\"\n                  style={{ width: '50%', height: '50px' }}\n                  placeholder=\"Rechercher ...\"\n                />\n              </div>\n              \n\n    \n              {currentData.map((item) => {\n                return <Produit key={item.id} {...item} item={item} />;\n              })}\n            </div>\n    \n            {totalPages > 1 && (\n              <div className=\"d-flex justify-content-center pt-3\">\n                <ul className=\"pagination\">\n                  {[...Array(totalPages)].map((_, index) => {\n                    const pageNumber = index + 1;\n                    return (\n                      <li key={pageNumber} className={`page-item ${currentPage === pageNumber ? 'active' : ''}`}>\n                        <button className=\"page-link\" onClick={() => handlePageChange(pageNumber)}>\n                          {pageNumber}\n                        </button>\n                      </li>\n                    );\n                  })}\n                </ul>\n              </div>\n            )}\n          </div>\n        </>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}