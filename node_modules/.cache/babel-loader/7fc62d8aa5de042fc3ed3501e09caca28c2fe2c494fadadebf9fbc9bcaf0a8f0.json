{"ast":null,"code":"import _slicedToArray from\"/data/data/com.termux/files/home/deploy/exo_com/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{ReactComponent as IconCreditCard2Front}from\"bootstrap-icons/icons/credit-card-2-front.svg\";import{ReactComponent as IconCart3}from\"bootstrap-icons/icons/cart3.svg\";import{useState}from\"react\";import axios from\"axios\";import{useCart}from\"react-use-cart\";import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Order(_ref){var handleClose=_ref.handleClose;//state (état ou données)\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),nom=_useState2[0],setNom=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),phone=_useState4[0],setPhone=_useState4[1];var _useCart=useCart(),items=_useCart.items,cartTotal=_useCart.cartTotal,emptyCart=_useCart.emptyCart;//comportements\nvar handleSubmit=function handleSubmit(e){e.preventDefault();for(var i=0;i<items.length;i++){axios({method:'post',url:'/.netlify/functions/commande',data:{\"nom\":nom,\"phone\":phone,\"quantity\":JSON.stringify(items[i].quantity),\"produit\":JSON.stringify(items[i].id)}}).then(function(response){// La commande a été passée avec succès, vider le panier\nemptyCart();}).catch(function(error){console.log(error);});}toast.success(\"Commande prise en compte. Livraison dans un delai de 24h. Merci!\",{autoClose:30000});setNom(\"\");setPhone(\"\");//alert(\"commande passé avec succès\")\n};var handleChange=function handleChange(e){setNom(e.target.value);};var handleOnChange=function handleOnChange(e){setPhone(e.target.value);};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-3 border-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header bg-info\",children:[/*#__PURE__*/_jsx(IconCreditCard2Front,{className:\"i-va\"}),\" Formulaire De Commande\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{value:nom,type:\"text\",className:\"form-control\",placeholder:\"Nom\",onChange:handleChange,required:\"true\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"input\",{value:phone,type:\"number\",className:\"form-control\",placeholder:\"Num\\xE9ro de T\\xE9l\\xE9phone\",onChange:handleOnChange,required:\"true\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer border-info d-grid\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:handleClose,children:\"valider\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header\",children:[/*#__PURE__*/_jsx(IconCart3,{className:\"i-va\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ms-3\",children:\"MA COMMANDE\"})]}),items.map(function(item,index){return/*#__PURE__*/_jsx(\"ul\",{className:\"list-group list-group-flush\",children:/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between lh-sm\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"my-0\",children:item.name})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-muted\",children:[item.price*item.quantity,\" FCFA\"]})]})},index);}),/*#__PURE__*/_jsxs(\"div\",{className:\"list-group-item d-flex justify-content-between py-3 mx-3\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total \"}),/*#__PURE__*/_jsxs(\"strong\",{children:[cartTotal,\" FCFA\"]})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger mt-2 ms-3\",style:{width:\"90%\"},onClick:handleClose,children:\"annuler la commande\"})]})})});}","map":{"version":3,"names":["ReactComponent","IconCreditCard2Front","IconCart3","useState","axios","useCart","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Order","_ref","handleClose","_useState","_useState2","_slicedToArray","nom","setNom","_useState3","_useState4","phone","setPhone","_useCart","items","cartTotal","emptyCart","handleSubmit","e","preventDefault","i","length","method","url","data","JSON","stringify","quantity","id","then","response","catch","error","console","log","success","autoClose","handleChange","target","value","handleOnChange","children","className","onSubmit","type","placeholder","onChange","required","onClick","map","item","index","name","price","style","width"],"sources":["/data/data/com.termux/files/home/deploy/exo_com/front/src/composant/Order.js"],"sourcesContent":["import { ReactComponent as IconCreditCard2Front } from \"bootstrap-icons/icons/credit-card-2-front.svg\";\nimport { ReactComponent as IconCart3 } from \"bootstrap-icons/icons/cart3.svg\";\n\n\nimport {useState} from \"react\"\n\nimport axios from \"axios\"\n\nimport {useCart} from \"react-use-cart\"\n\nimport { toast } from 'react-toastify';\n\n\n\nexport default function Order({handleClose}){\n    \n\n    \n        //state (état ou données)\n    \n    const [nom, setNom] = useState(\"\")\n    const [phone, setPhone] = useState(null)\n    \n    const {items,cartTotal, emptyCart} = useCart()\n    \n    \n    \n\n    \n\n    \n    //comportements\n    \n    const handleSubmit = (e)=>{\n        e.preventDefault()\n        \n        for(let i=0 ; i<items.length; i++){\n            axios({\n              method: 'post',\n              url: '/.netlify/functions/commande',\n              data: {\n                \"nom\": nom,\n                \n                \"phone\": phone,\n                \n                \"quantity\": JSON.stringify(items[i].quantity),\n                \n                \"produit\": JSON.stringify(items[i].id)\n              },\n            })\n            \n            .then(response => {\n              // La commande a été passée avec succès, vider le panier\n              emptyCart();\n            \n            })\n            \n            .catch(error => {\n              console.log(error);\n            });\n        }\n        \n        toast.success(\"Commande prise en compte. Livraison dans un delai de 24h. Merci!\",  { autoClose: 30000 }) ;\n        \n        setNom(\"\")\n        setPhone(\"\")\n        \n        //alert(\"commande passé avec succès\")\n    }\n    \n    const handleChange = (e)=>{\n        setNom(e.target.value)\n    }\n    \n    const handleOnChange = (e)=>{\n        setPhone(e.target.value)\n    }\n    \n\n    \n    \n\n    return(\n        <>\n        <div>\n          <div className=\"row\">\n            <div className=\"col-md-12\">\n              <div className=\"card mb-3 border-info\">\n                <div className=\"card-header bg-info\">\n                  <IconCreditCard2Front className=\"i-va\" /> Formulaire De Commande\n                </div>\n                <form onSubmit={handleSubmit}>\n                <div className=\"card-body\">\n                  \n                  <div className=\"row g-3\">\n                    <div className=\"col-md-6\">\n                      <input\n                        value={nom}\n                        type=\"text\"\n                        className=\"form-control\"\n                        placeholder=\"Nom\"\n                        onChange={handleChange}\n                       required=\"true\"/>\n                    </div>\n                    <div className=\"col-md-6\">\n                      <input\n                        value={phone}\n                        type=\"number\"\n                        className=\"form-control\"\n                        placeholder=\"Numéro de Téléphone\"\n                        onChange={handleOnChange}\n                       required=\"true\"/>\n                    </div>\n                  </div>\n            \n                </div>\n                <div className=\"card-footer border-info d-grid\">\n    \n                  <button type=\"submit\" className=\"btn btn-primary\" onClick={handleClose}>\n                    valider\n                  </button>\n                </div>\n                </form>\n              </div>\n            </div>\n            <div className=\"col-md-12\">\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <IconCart3 className=\"i-va\" />\n                  <span className=\"ms-3\">MA COMMANDE</span>\n                </div>\n                {items.map((item,index)=>{\n                        return(\n                <ul className=\"list-group list-group-flush\" key={index}>\n                  <li className=\"list-group-item d-flex justify-content-between lh-sm\">\n                    <div>\n                      <h6 className=\"my-0\">{item.name}</h6>\n                    </div>\n                    <span className=\"text-muted\">{item.price*item.quantity} FCFA</span>\n                  </li>\n                </ul>)\n                })}\n                <div className=\"list-group-item d-flex justify-content-between py-3 mx-3\">\n                    <span>Total </span>\n                    <strong>{cartTotal} FCFA</strong>\n                </div>\n              </div>\n              \n            </div>\n            <button className=\"btn btn-danger mt-2 ms-3\" style={{width:\"90%\"}} onClick={handleClose}>\n                annuler la commande\n            </button>\n          </div>\n        </div>\n        </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}